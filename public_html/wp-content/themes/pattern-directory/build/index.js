(()=>{var e={967:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=i(e,o(r)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=i(t,r));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{addFavorite:()=>Q,fetchCategories:()=>D,fetchPatternFlagReasons:()=>M,fetchPatterns:()=>A,loadCategories:()=>F,loadFavorites:()=>B,loadPattern:()=>I,loadPatternFlagReasons:()=>$,loadPatterns:()=>O,removeFavorite:()=>j,setCurrentQuery:()=>L,setErrorPatterns:()=>R});var t={};r.r(t),r.d(t,{getCategories:()=>z,getFavorites:()=>Y,getPattern:()=>W,getPatternFlagReasons:()=>H,getPatternsByQuery:()=>G});var n={};r.r(n),r.d(n,{getCategories:()=>ie,getCategoryById:()=>le,getCategoryBySlug:()=>se,getCurrentQuery:()=>ne,getFavorites:()=>pe,getPattern:()=>re,getPatternFlagReasons:()=>ce,getPatternTotalPagesByQuery:()=>te,getPatternTotalsByQuery:()=>ee,getPatterns:()=>J,getPatternsByQuery:()=>Z,getQueryFromUrl:()=>ge,getUrlFromQuery:()=>me,hasLoadedCategories:()=>oe,isFavorite:()=>de,isLoadingCategories:()=>ae,isLoadingPatternFlagReasons:()=>ue,isLoadingPatternsByQuery:()=>X});const a=window.React;var o=r.n(a);const i=window.wp.element,s=window.wp.i18n,l=window.wp.htmlEntities,c=window.wp.data,u=({name:e,url:t,avatar:r})=>(0,a.createElement)("a",{href:t,className:"pattern__author-avatar"},(0,a.createElement)("img",{alt:"",src:r}),e),p=({className:e="",style:t,children:r})=>(0,a.createElement)("span",{className:`${e} pattern-skeleton__container`,style:t},r),d=e=>(0,a.createElement)("span",{className:"pattern-skeleton",style:e}),g=window.wp.primitives;function m(e){return(0,a.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",...e},(0,a.createElement)(g.Path,{d:"M11.941 21.175l-1.443-1.32c-5.124-4.67-8.508-7.75-8.508-11.53 0-3.08 2.408-5.5 5.473-5.5 1.732 0 3.394.81 4.478 2.09 1.085-1.28 2.747-2.09 4.478-2.09 3.065 0 5.473 2.42 5.473 5.5 0 3.78-3.383 6.86-8.508 11.54l-1.443 1.31z"}))}const f=2/3;function h(e){return e*f}const v=()=>{const[e,t]=(0,i.useState)(),r=(0,i.useRef)();return(0,i.useEffect)((()=>{r.current&&t(`${h(r.current.clientWidth)}px`)}),[r]),(0,a.createElement)("div",{ref:r},(0,a.createElement)(p,null,(0,a.createElement)(d,{height:e}),(0,a.createElement)(d,{height:"14px",marginTop:"1rem"}),(0,a.createElement)(p,{style:{flexDirection:"row",marginTop:"0.5rem",alignItems:"center"}},(0,a.createElement)(d,{height:"18px",width:"18px",marginRight:"0.5rem",borderRadius:"32px"}),(0,a.createElement)(d,{height:"12px",width:"100px",marginRight:"0.75rem"}),(0,a.createElement)(m,{width:"16px",height:"16px",fill:"#787c82",className:"pattern-favorite-button__filled"}),(0,a.createElement)(d,{height:"12px",width:"32px",marginLeft:"0.5rem"}))))},_=({length:e=6})=>Array(e).fill().map(((e,t)=>(0,a.createElement)(v,{key:t}))),y=window.wp.url,w=e=>e.split("?")[0],E=(e,t)=>{if(!t||!e)return"";const r=(0,y.getQueryArgs)(e);if(r[t])return r[t];const n=(o=w(e).replace(/\/$/,""),o.replace(/^\//,"")).split("/"),a=n.indexOf(t);var o;return-1===a?"":n[a+1]||""},b=e=>E(e,"categories"),S=e=>Number(E(e,"page")||1),P=e=>decodeURI(E(e,"search")),N=(0,i.createContext)();function k({children:e}){const[t,r]=(0,i.useState)((0,y.getPathAndQueryString)(window.location.href)),n=e=>{window.history.pushState("","",e),r(e)},o=()=>{r(document.location.href)};return(0,i.useEffect)((()=>(window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)})),[]),(0,a.createElement)(N.Provider,{value:{path:t,update:e=>{const r=(e=>(e=>{const t={};return Object.keys(e).forEach((r=>{const n=e[r];null!=n&&n.toString().length>0&&(t[r]=n)})),t})({...(0,y.getQueryArgs)(t),...(0,y.getQueryArgs)(e)}))(e),a=w(e),o=(0,y.addQueryArgs)(a,r);n(o)},replace:n}},e)}function C(){const e=(0,i.useContext)(N);if(void 0===e)throw new Error("useRoute must be used within a Provider");return e}function T({currentPage:e=1,onNavigation:t,totalPages:r}){const{path:n,update:o}=C();if(!r||r<=1)return null;const i=e>1,l=e<r,c=(0,y.getQueryString)(n)?"?"+(0,y.getQueryString)(n):"",u=n.replace(c,"").replace(/page\/\d+\/?/,""),p=function(e,t=1){const r=Array.from({length:e},((e,t)=>t+1)),n=[];return e<=5?r:(n.push(...r.slice(0,2)),t>=2&&t<=e-1&&n.push(...r.slice(t-2,t+1)),n.push(...r.slice(-2)),n.filter(((e,t,r)=>r.indexOf(e)===t)).reduce(((e,t,r,n)=>{if(0===r)return e.push(t),e;const a=Math.abs(n[r]-n[r-1]);return 0===a||(a>1&&e.push("…"),e.push(t)),e}),[]))}(r,e),d=`${u}page/%s/${c}`,g=e=>1===e?`${u}${c}`:(0,s.sprintf)(d,e),m=(e,r)=>{e.preventDefault(),o(g(r)),"function"==typeof t&&t()};return(0,a.createElement)("nav",{className:"pagination","aria-label":(0,s.__)("Pagination","wporg-patterns")},(0,a.createElement)("ul",{className:"pagination__list"},(0,a.createElement)("li",{className:"pagination__item pagination__item-previous-page"},i&&(0,a.createElement)("a",{className:"pagination__link",href:g(e-1),onClick:t=>m(t,e-1)},(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Previous page","wporg-patterns")),(0,a.createElement)("span",{"aria-hidden":!0},(0,s._x)("Previous","previous page link label","wporg-patterns")))),p.map(((t,r)=>"…"===t?(0,a.createElement)("li",{className:"pagination__item",key:`${r}-${t}`},t):(0,a.createElement)("li",{className:"pagination__item",key:t},(0,a.createElement)("a",{className:"pagination__link",href:g(t),"aria-current":t===e?"page":void 0,onClick:e=>m(e,t)},(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.sprintf)(
// translators: %s is the page number.
// translators: %s is the page number.
(0,s.__)("Page %s","wporg-patterns"),t)),(0,a.createElement)("span",{"aria-hidden":!0},t))))),(0,a.createElement)("li",{className:"pagination__item pagination__item-next-page"},l&&(0,a.createElement)("a",{className:"pagination__link",href:g(e+1),onClick:t=>m(t,e+1)},(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Next page","wporg-patterns")),(0,a.createElement)("span",{"aria-hidden":!0},(0,s._x)("Next","next page link label","wporg-patterns"))))))}const x=window.wp.dataControls;function A(e){return{type:"FETCH_BLOCK_PATTERNS",query:e}}function I(e,t){return{type:"LOAD_BLOCK_PATTERN",postId:e,pattern:t}}function O(e,{page:t,patterns:r,total:n,totalPages:a}){return{type:"LOAD_BLOCK_PATTERNS",query:e,page:t,patterns:r,total:n,totalPages:a}}function R(e,{page:t,error:r}){return{type:"ERROR_BLOCK_PATTERNS",query:e,page:t,error:r}}function L(e){return{type:"SET_CURRENT_QUERY",query:e}}function D(){return{type:"FETCH_CATEGORIES"}}function F(e){return{type:"LOAD_CATEGORIES",categories:e}}function M(){return{type:"FETCH_PATTERN_FLAG_REASONS"}}function $(e){return{type:"LOAD_PATTERN_FLAG_REASONS",reasons:e}}function B(e){return{type:"LOAD_FAVORITES",patternIds:e}}function*Q(e){const t=yield(0,x.apiFetch)({path:"/wporg/v1/pattern-favorites",method:"POST",data:{id:e}});if("number"==typeof t)return{type:"ADD_FAVORITE",patternId:e,count:t}}function*j(e){const t=yield(0,x.apiFetch)({path:"/wporg/v1/pattern-favorites",method:"DELETE",data:{id:e}});if("number"==typeof t)return{type:"REMOVE_FAVORITE",patternId:e,count:t}}function q(e={}){const t=Object.keys(e).sort();let r="";for(let n=0;n<t.length;n++){const a=t[n];let o=e[a];switch(Array.isArray(o)&&(o=e[a].join()),a){case"page":case"per_page":case"_fields":break;default:r+=(r?"&":"")+(0,y.addQueryArgs)("",{[a]:o}).slice(1)}}return r}function U(e={},t){switch(t.type){case"LOAD_BLOCK_PATTERNS":{const r=(t.patterns||[]).reduce(((e,t)=>({...e,[t.id]:t})),{});return{...e,...r}}case"LOAD_BLOCK_PATTERN":return{...e,[t.postId]:t.pattern};case"ADD_FAVORITE":case"REMOVE_FAVORITE":{const r={...e[t.patternId],favorite_count:t.count};return{...e,[t.patternId]:r}}default:return e}}function V(e={},t){const r=(t.patterns||[]).map((({id:e})=>e)),{page:n,total:a,totalPages:o}=t;switch(t.type){case"LOAD_BLOCK_PATTERNS":{const i={...e[t.query]||{},total:a,totalPages:o};return i[n]=r,{...e,[t.query]:i}}case"ERROR_BLOCK_PATTERNS":{const r=e[t.query]||{};return r[n]=[],{...e,[t.query]:r}}default:return e}}const K=(0,c.combineReducers)({patterns:function(e={},t){return{byId:U(e.byId,t),queries:V(e.queries,t)}},categories:function(e=void 0,t){switch(t.type){case"FETCH_CATEGORIES":return null;case"LOAD_CATEGORIES":const e=(t.categories||[]).sort(((e,t)=>e.name.localeCompare(t.name)));return[{id:-1,slug:"",name:(0,s.__)("All","wporg-patterns"),link:wporgPatternsUrl.site},...e]}return e},currentQuery:function(e=void 0,t){return"SET_CURRENT_QUERY"===t.type?t.query:e},patternFlagReasons:function(e=void 0,t){switch(t.type){case"FETCH_PATTERN_FLAG_REASONS":return null;case"LOAD_PATTERN_FLAG_REASONS":return[...t.reasons];default:return e}},favorites:function(e=null,t){const{patternId:r}=t;switch(t.type){case"LOAD_FAVORITES":return t.patternIds;case"ADD_FAVORITE":return e.includes(r)?e:[...e,r];case"REMOVE_FAVORITE":return e.filter((e=>e!==r))}return e}});function*G(e){const t=q(e);try{yield A(t);const r=yield(0,x.apiFetch)({path:(0,y.addQueryArgs)("/wp/v2/wporg-pattern",{...e,locale:wporgLocale.id}),parse:!1}),{total:n,totalPages:a,results:o}=yield(0,x.__unstableAwaitPromise)(async function(e){try{return{total:Number(e.headers?.get("X-WP-Total")||0),totalPages:Number(e.headers?.get("X-WP-TotalPages")||0),results:await e.json()}}catch(e){return{}}}(r));yield O(t,{page:e.page||1,patterns:o,total:n,totalPages:a})}catch(r){const n=yield(0,x.__unstableAwaitPromise)(async function(e){try{return await e.json()}catch(e){return{}}}(r));yield R(t,{page:e.page||1,error:n})}}function*W(e){try{const t=yield(0,x.apiFetch)({path:(0,y.addQueryArgs)(`/wp/v2/wporg-pattern/${e}`)});yield I(e,t)}catch(e){}}function*z(){try{yield{type:"FETCH_CATEGORIES"};const e=yield(0,x.apiFetch)({path:(0,y.addQueryArgs)("/wp/v2/pattern-categories",{per_page:50})});yield F(e)}catch(e){}}function*H(){try{yield{type:"FETCH_PATTERN_FLAG_REASONS"};const e=yield(0,x.apiFetch)({path:(0,y.addQueryArgs)("/wp/v2/wporg-pattern-flag-reason")});yield $(e)}catch(e){}}function*Y(){try{const e=yield(0,x.apiFetch)({path:"/wporg/v1/pattern-favorites"});yield B(e)}catch(e){}}function X(e,t){const r=q(t),n=t?.page||1;return!Array.isArray(e.patterns.queries?.[r]?.[n])}function J(e){return Object.values(e.patterns.byId)}function Z(e,t){const r=q(t),n=t?.page||1,a=e.patterns.queries?.[r]?.[n];return(a||[]).map((t=>e.patterns.byId[t]))}function ee(e,t){const r=q(t);return e.patterns.queries?.[r]?.total||0}function te(e,t){const r=q(t);return e.patterns.queries?.[r]?.totalPages||0}function re(e,t){return e.patterns.byId[t]||null}function ne(e){return e.currentQuery}function ae(e){return null===e.categories}function oe(e){return Array.isArray(e.categories)}function ie(e){return e.categories}function se(e,t){if(!oe(e))return;const[r]=e.categories.filter((e=>e.slug===t));return r}function le(e,t){if(oe(e))return e.categories.find((({id:e})=>t===e))}function ce(e){return e.patternFlagReasons}function ue(e){return null===e.patternFlagReasons}function pe(e){return e.favorites}function de(e,t){return e.favorites?.includes(t)}function ge(e,t){const r=["categories","author","page","search"],n=(0,y.getQueryArgs)(t),a=b(t);if(a&&-1===r.indexOf(a)){const t=se(e,a);t?.id&&(n["pattern-categories"]=t.id)}const o=E(t,"author");o&&-1===r.indexOf(o)&&(n.author_name=o);const i=S(t);"number"==typeof i&&i>1&&(n.page=i);const s=P(t);s.length>0&&-1===r.indexOf(s)&&(n.search=s);const l=E(t,"my-patterns");return l&&"page"!==l&&(n.status=l),n}function me(e,t={},r=wporgPatternsUrl.site){if(r=r.replace(/\/$/,""),t.author_name&&(r+=`/author/${t.author_name}`,delete t.author_name),t["pattern-categories"]){const n=t["pattern-categories"],a=ie(e).find((({id:e})=>n===e));a?.slug&&(r+=`/categories/${a.slug}`),delete t["pattern-categories"]}return t.page&&(r+=`/page/${t.page}`,delete t.page),Object.keys(t).length?r+="/?"+(0,y.buildQueryString)(t):r+"/"}const fe=(0,c.createReduxStore)("wporg/pattern-directory",{reducer:K,selectors:n,actions:e,controls:x.controls,resolvers:t});(0,c.register)(fe);const he=function({header:e,children:t,onNavigation:r,query:n,showPagination:o=!0}){const{isLoading:i,posts:s,totalPages:l}=(0,c.useSelect)((e=>{const{getPatternTotalPagesByQuery:t,getPatternsByQuery:r,isLoadingPatternsByQuery:a}=e(fe);return{isLoading:n&&a(n),posts:n?r(n):[],totalPages:n?t(n):0}}));return(0,a.createElement)(a.Fragment,null,s.length?e:null,(0,a.createElement)("div",{className:"pattern-grid"},i?(0,a.createElement)(_,{length:n?.per_page}):s.map(t)),o&&(0,a.createElement)(T,{totalPages:l,currentPage:n?.page,onNavigation:r}))},ve=window.wp.compose,_e=window.wp.components,ye=function({url:e}){return(0,a.createElement)("div",null,(0,a.createElement)("iframe",{className:"pattern-preview__viewport-iframe",title:(0,s.__)("Pattern Preview","wporg-patterns"),tabIndex:"-1",style:{width:"100%",height:"50vh",minHeight:"600px",overflowY:"auto"},src:e}))};function we(e,t){return e.map((function(e,r){return e+t[r]}))}function Ee(e,t){return e.map((function(e,r){return e-t[r]}))}function be(e){return Math.hypot.apply(Math,e)}function Se(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function Pe(e,t,r){return 0===t||Math.abs(t)===1/0?function(e,t){return Math.pow(e,5*t)}(e,r):e*t*r/(t+r*e)}function Ne(e,t,r,n){return void 0===n&&(n=.15),0===n?function(e,t,r){return Math.max(t,Math.min(e,r))}(e,t,r):e<t?-Pe(t-e,r-t,n)+t:e>r?+Pe(e-r,r-t,n)+r:e}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(){return Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ce.apply(this,arguments)}function Te(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function Oe(){}function Re(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?Oe:1===t.length?t[0]:function(){for(var e,r,n=Ie(t);!(r=n()).done;)e=r.value.apply(this,arguments)||e;return e}}function Le(e,t){if(void 0===e){if(void 0===t)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function De(e){if("function"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(void 0,r)}return e}function Fe(e,t){void 0===e&&(e={});for(var r={},n=0,a=Object.entries(t);n<a.length;n++){var o=a[n],i=o[0],s=o[1];switch(typeof s){case"function":r[i]=s.call(r,e[i],i,e);break;case"object":r[i]=Fe(e[i],s);break;case"boolean":s&&(r[i]=e[i])}}return r}function Me(){return"undefined"!=typeof window&&"ontouchstart"in window}function $e(e){return"pointerId"in e?null:"touchend"===e.type?e.changedTouches:e.targetTouches}function Be(e){return Array.from($e(e)).map((function(e){return e.identifier}))}function Qe(e){return{buttons:"buttons"in e?e.buttons:0,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}}var je=function(e){return e};function qe(e,t){void 0===t&&(t=je);var r=$e(e),n=r?r[0]:e;return t([n.clientX,n.clientY])}var Ue=Ce({},{threshold:function(e){return void 0===e&&(e=0),Le(e)},rubberband:function(e){switch(void 0===e&&(e=0),e){case!0:return Le(.15);case!1:return Le(0);default:return Le(e)}},enabled:function(e){return void 0===e&&(e=!0),e},triggerAllEvents:function(e){return void 0===e&&(e=!1),e},initial:function(e){return void 0===e&&(e=0),"function"==typeof e?e:Le(e)},transform:!0},{axis:!0,lockDirection:function(e){return void 0===e&&(e=!1),e},bounds:function(e){if(void 0===e&&(e={}),"function"==typeof e)return function(t){return Ue.bounds(e(t))};var t=e,r=t.left,n=void 0===r?-1/0:r,a=t.right,o=void 0===a?1/0:a,i=t.top,s=void 0===i?-1/0:i,l=t.bottom;return[[n,o],[s,void 0===l?1/0:l]]}}),Ve="undefined"!=typeof window&&window.document&&window.document.createElement,Ke={enabled:function(e){return void 0===e&&(e=!0),e},domTarget:!0,window:function(e){function t(_x){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return void 0===e&&(e=Ve?window:void 0),e})),eventOptions:function(e){var t=void 0===e?{}:e,r=t.passive,n=void 0===r||r,a=t.capture;return{passive:n,capture:void 0!==a&&a}},transform:!0},Ge=Ce({},Ue,{useTouch:function(e){void 0===e&&(e=!1);var t=Me(),r="undefined"!=typeof window&&"onpointerdown"in window;return!(!e||!t)||!(!t||r)},experimental_preventWindowScrollY:function(e){return void 0===e&&(e=!1),e},threshold:function(e,t,r){var n=r.filterTaps,a=void 0!==n&&n,o=r.lockDirection,i=void 0!==o&&o,s=r.axis,l=Le(e,a?3:i||(void 0===s?void 0:s)?1:0);return this.filterTaps=a,l},swipeVelocity:function(e){return void 0===e&&(e=.5),Le(e)},swipeDistance:function(e){return void 0===e&&(e=50),Le(e)},swipeDuration:function(e){return void 0===e&&(e=250),e},delay:function(e){switch(void 0===e&&(e=0),e){case!0:return 180;case!1:return 0;default:return e}}});function We(e){var t,r=e.domTarget,n=e.eventOptions,a=e.window,o=e.enabled,i=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["domTarget","eventOptions","window","enabled"]),s=(void 0===(t={domTarget:r,eventOptions:n,window:a,enabled:o})&&(t={}),Fe(t,Ke));return s.drag=function(e){return void 0===e&&(e={}),Fe(e,Ge)}(i),s}function ze(e){return Ce({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_threshold:[0,0],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:Oe,canceled:!1,memo:void 0,args:void 0},e)}function He(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},drag:ze({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),pinch:ze({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:ze({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:ze({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:ze({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var Ye=new Map,Xe=function(e){return e},Je=function(){function e(e,t){var r=this;void 0===t&&(t=[]),this.controller=e,this.args=t,this.debounced=!0,this.setTimeout=function(e,t){var n;void 0===t&&(t=140),clearTimeout(r.controller.timeouts[r.stateKey]);for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];r.controller.timeouts[r.stateKey]=(n=window).setTimeout.apply(n,[e,t].concat(o))},this.clearTimeout=function(){clearTimeout(r.controller.timeouts[r.stateKey])},this.fireGestureHandler=function(e){if(void 0===e&&(e=!1),r.state._blocked)return r.debounced||(r.state._active=!1,r.clean()),null;if(!e&&!r.state.intentional&&!r.config.triggerAllEvents)return null;if(r.state.intentional){var t=r.state.active,n=r.state._active;r.state.active=n,r.state.first=n&&!t,r.state.last=t&&!n,r.controller.state.shared[r.ingKey]=n}var a=r.controller.pointerIds.size||r.controller.touchIds.size,o=r.controller.state.shared.buttons>0||a>0,i=Ce({},r.controller.state.shared,r.state,r.mapStateValues(r.state),{locked:!!document.pointerLockElement,touches:a,down:o}),s=r.handler(i);return r.state.memo=void 0!==s?s:r.state.memo,i},this.controller=e,this.args=t}var t,r,n=e.prototype;return n.updateSharedState=function(e){Object.assign(this.controller.state.shared,e)},n.updateGestureState=function(e){Object.assign(this.state,e)},n.checkIntentionality=function(e,t){return{_intentional:e,_blocked:!1}},n.getMovement=function(e){var t=this.config.rubberband,r=this.state,n=r._bounds,a=r._initial,o=r._active,i=r._intentional,s=r.lastOffset,l=r.movement,c=r._threshold,u=this.getInternalMovement(e,this.state),p=!1===i[0]?Ze(u[0],c[0]):i[0],d=!1===i[1]?Ze(u[1],c[1]):i[1],g=this.checkIntentionality([p,d],u);if(g._blocked)return Ce({},g,{_movement:u,delta:[0,0]});var m=g._intentional,f=u,h=[!1!==m[0]?u[0]-m[0]:0,!1!==m[1]?u[1]-m[1]:0],v=we(h,s),_=o?t:[0,0];return h=et(n,we(h,a),_),Ce({},g,{intentional:!1!==m[0]||!1!==m[1],_initial:a,_movement:f,movement:h,values:e,offset:et(n,v,_),delta:Ee(h,l)})},n.clean=function(){this.clearTimeout()},t=e,(r=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}},{key:"transform",get:function(){return this.config.transform||this.controller.config.transform||Xe}}])&&ke(t.prototype,r),e}();function Ze(e,t){return Math.abs(e)>=t&&Se(e)*t}function et(e,t,r){var n=t[0],a=t[1],o=r[0],i=r[1],s=e[0],l=s[0],c=s[1],u=e[1],p=u[0],d=u[1];return[Ne(n,l,c,o),Ne(a,p,d,i)]}function tt(e,t,r){var n=e.state,a=t.timeStamp,o=t.type,i=n.values;return{_lastEventType:o,event:t,timeStamp:a,elapsedTime:r?0:a-n.startTime,previous:i}}var rt=function(e){var t=this;this.classes=e,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=Me(),this.supportsGestureEvents=function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),this.bind=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var a,o={},i=Ie(t.classes);!(a=i()).done;)new(0,a.value)(t,r).addBindings(o);var s=function(e){ot(o,e,(function(n){return t.nativeRefs[e](Ce({},t.state.shared,{event:n,args:r}))}))};for(var l in t.nativeRefs)s(l);return t.config.domTarget?function(e,t){var r=e.config,n=e.domListeners,a=at(r);if(!a)throw new Error("domTarget must be defined");var o=r.eventOptions;st(a,nt(n),o);for(var i=0,s=Object.entries(t);i<s.length;i++){var l=s[i],c=l[0],u=l[1],p=c.slice(2).toLowerCase();n.push([p,Re.apply(void 0,u)])}it(a,n,o)}(t,o):function(e,t){for(var r={},n=e.config.eventOptions.capture?"Capture":"",a=0,o=Object.entries(t);a<o.length;a++){var i=o[a],s=i[0],l=i[1],c=Array.isArray(l)?l:[l];r[s+n]=Re.apply(void 0,c)}return r}(t,o)},this.effect=function(){return t.config.domTarget&&t.bind(),t.clean},this.clean=function(){var e=at(t.config),r=t.config.eventOptions;e&&st(e,nt(t.domListeners),r),Object.values(t.timeouts).forEach(clearTimeout),function(e){var t=e.config,r=t.window,n=t.eventOptions,a=e.windowListeners;if(r){for(var o in a)st(r,a[o],n);e.windowListeners={}}}(t)},this.classes=e,this.state=He(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function nt(e){return void 0===e&&(e=[]),e.splice(0,e.length)}function at(e){var t=e.domTarget;return t&&"current"in t?t.current:t}function ot(e,t,r){e[t]||(e[t]=[]),e[t].push(r)}function it(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={});for(var n,a=Ie(t);!(n=a()).done;){var o=n.value,i=o[0],s=o[1];e.addEventListener(i,s,r)}}function st(e,t,r){void 0===t&&(t=[]),void 0===r&&(r={});for(var n,a=Ie(t);!(n=a()).done;){var o=n.value,i=o[0],s=o[1];e.removeEventListener(i,s,r)}}function lt(){}function ct(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}var ut=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="dragging",t.stateKey="drag",t.setPointerCapture=function(e){if(!t.config.useTouch&&!document.pointerLockElement){var r=e.target,n=e.pointerId;r&&"setPointerCapture"in r&&r.setPointerCapture(n),t.updateGestureState({_dragTarget:r,_dragPointerId:n})}},t.releasePointerCapture=function(){if(!t.config.useTouch&&!document.pointerLockElement){var e=t.state,r=e._dragTarget,n=e._dragPointerId;if(n&&r&&"releasePointerCapture"in r&&(!("hasPointerCapture"in r)||r.hasPointerCapture(n)))try{r.releasePointerCapture(n)}catch(e){}}},t.preventScroll=function(e){t.state._dragPreventScroll&&e.cancelable&&e.preventDefault()},t.getEventId=function(e){return t.config.useTouch?e.changedTouches[0].identifier:e.pointerId},t.isValidEvent=function(e){return t.state._pointerId===t.getEventId(e)},t.shouldPreventWindowScrollY=t.config.experimental_preventWindowScrollY&&t.controller.supportsTouchEvents,t.setUpWindowScrollDetection=function(e){var r,n,a,o,i,s;ct(e),r=t.controller,n=t.stateKey,a=[["touchmove",t.preventScroll],["touchend",t.clean.bind(xe(t))],["touchcancel",t.clean.bind(xe(t))]],o={passive:!1},i=r.config,s=r.windowListeners,void 0===a&&(a=[]),void 0===o&&(o=i.eventOptions),i.window&&(st(i.window,s[n],o),it(i.window,s[n]=a,o)),t.setTimeout(t.startDrag.bind(xe(t)),250,e)},t.setUpDelayedDragTrigger=function(e){t.state._dragDelayed=!0,ct(e),t.setTimeout(t.startDrag.bind(xe(t)),t.config.delay,e)},t.setStartState=function(e){var r=qe(e,t.transform);t.updateSharedState(Qe(e)),t.updateGestureState(Ce({},function(e,t,r,n){var a=e.state,o=e.config,i=e.stateKey,s=e.args,l=e.transform,c=a.offset,u=r.timeStamp,p=o.initial,d=o.bounds,g=Ee(l(o.threshold),l([0,0])).map(Math.abs),m=Ce({},He()[i],{_active:!0,args:s,values:t,initial:null!=n?n:t,_threshold:g,offset:c,lastOffset:c,startTime:u});return Ce({},m,{_initial:De(p,m),_bounds:De(d,m)})}(xe(t),r,e),tt(xe(t),e,!0),{_pointerId:t.getEventId(e)})),t.updateGestureState(t.getMovement(r))},t.onDragStart=function(e){(function(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(Be(t))})(t.controller,e),t.enabled&&!t.state._active&&(t.setStartState(e),t.setPointerCapture(e),t.shouldPreventWindowScrollY?t.setUpWindowScrollDetection(e):t.config.delay>0?t.setUpDelayedDragTrigger(e):t.startDrag(e,!0))},t.onDragChange=function(e){if(!t.state.canceled&&t.state._active&&t.isValidEvent(e)&&(t.state._lastEventType!==e.type||e.timeStamp!==t.state.timeStamp)){var r;if(document.pointerLockElement){var n=e.movementX,a=e.movementY;r=we(t.transform([n,a]),t.state.values)}else r=qe(e,t.transform);var o=t.getKinematics(r,e);if(!t.state._dragStarted){if(t.state._dragDelayed)return void t.startDrag(e);if(!t.shouldPreventWindowScrollY)return;if(t.state._dragPreventScroll||!o.axis)return;if("x"!==o.axis)return void(t.state._active=!1);t.startDrag(e)}var i=Qe(e);t.updateSharedState(i);var s=tt(xe(t),e),l=be(o._movement),c=t.state._dragIsTap;c&&l>=3&&(c=!1),t.updateGestureState(Ce({},s,o,{_dragIsTap:c})),t.fireGestureHandler()}},t.onDragEnd=function(e){if(function(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):Be(t).forEach((function(t){return e.touchIds.delete(t)}))}(t.controller,e),t.isValidEvent(e)&&(t.clean(),t.state._active)){t.state._active=!1;var r=t.state._dragIsTap,n=t.state.velocities,a=n[0],o=n[1],i=t.state.movement,s=i[0],l=i[1],c=t.state._intentional,u=c[0],p=c[1],d=t.config.swipeVelocity,g=d[0],m=d[1],f=t.config.swipeDistance,h=f[0],v=f[1],_=t.config.swipeDuration,y=Ce({},tt(xe(t),e),t.getMovement(t.state.values)),w=[0,0];y.elapsedTime<_&&(!1!==u&&Math.abs(a)>g&&Math.abs(s)>h&&(w[0]=Se(a)),!1!==p&&Math.abs(o)>m&&Math.abs(l)>v&&(w[1]=Se(o))),t.updateSharedState({buttons:0}),t.updateGestureState(Ce({},y,{tap:r,swipe:w})),t.fireGestureHandler(t.config.filterTaps&&!0===r)}},t.clean=function(){var r,n,a,o,i;e.prototype.clean.call(xe(t)),t.state._dragStarted=!1,t.releasePointerCapture(),r=t.controller,n=t.stateKey,o=r.config,i=r.windowListeners,void 0===a&&(a=o.eventOptions),o.window&&(st(o.window,i[n],a),delete i[n])},t.onCancel=function(){t.state.canceled||(t.updateGestureState({canceled:!0,_active:!1}),t.updateSharedState({buttons:0}),setTimeout((function(){return t.fireGestureHandler()}),0))},t.onClick=function(e){t.state._dragIsTap||e.stopPropagation()},t}Te(t,e);var r=t.prototype;return r.startDrag=function(e,t){void 0===t&&(t=!1),this.state._active&&!this.state._dragStarted&&(t||this.setStartState(e),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())},r.addBindings=function(e){this.config.useTouch?(ot(e,"onTouchStart",this.onDragStart),ot(e,"onTouchMove",this.onDragChange),ot(e,"onTouchEnd",this.onDragEnd),ot(e,"onTouchCancel",this.onDragEnd)):(ot(e,"onPointerDown",this.onDragStart),ot(e,"onPointerMove",this.onDragChange),ot(e,"onPointerUp",this.onDragEnd),ot(e,"onPointerCancel",this.onDragEnd)),this.config.filterTaps&&ot(e,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},t}(function(e){function t(){return e.apply(this,arguments)||this}Te(t,e);var r=t.prototype;return r.getInternalMovement=function(e,t){return Ee(e,t.initial)},r.checkIntentionality=function(e,t){if(!1===e[0]&&!1===e[1])return{_intentional:e,axis:this.state.axis};var r=t.map(Math.abs),n=r[0],a=r[1],o=this.state.axis||(n>a?"x":n<a?"y":void 0);return this.config.axis||this.config.lockDirection?o?this.config.axis&&o!==this.config.axis?{_intentional:e,_blocked:!0,axis:o}:(e["x"===o?1:0]=!1,{_intentional:e,_blocked:!1,axis:o}):{_intentional:[!1,!1],_blocked:!1,axis:o}:{_intentional:e,_blocked:!1,axis:o}},r.getKinematics=function(e,t){var r=this.getMovement(e);if(!r._blocked){var n=t.timeStamp-this.state.timeStamp;Object.assign(r,function(e,t,r){var n=be(t),a=0===n?0:1/n,o=0===r?0:1/r,i=o*n,s=t.map((function(e){return o*e})),l=t.map((function(e){return a*e}));return{velocities:s,velocity:i,distance:be(e),direction:l}}(r.movement,r.delta,n))}return r},r.mapStateValues=function(e){return{xy:e.values,vxvy:e.velocities}},t}(Je));function pt(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var r,n,a,o;if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!pt(e[n],t[n]))return!1;return!0}if("function"==typeof Map&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;for(o=e.entries();!(n=o.next()).done;)if(!pt(n.value[1],t.get(n.value[0])))return!1;return!0}if("function"==typeof Set&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(n=o.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if("undefined"!=typeof Element&&e instanceof Element)return!1;for(n=r;0!=n--;)if(!("_owner"===a[n]&&e.$$typeof||pt(e[a[n]],t[a[n]])))return!1;return!0}return e!=e&&t!=t}function dt(e,t){try{return pt(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}const gt=window.wp.keycodes,mt=function({label:e,className:t,onDragChange:r,onDragEnd:n,direction:i="left",...s}){const l=function(e,t){void 0===t&&(t={}),Ye.set("drag",ut);var s=(0,a.useRef)();return s.current||(s.current=function(e,t){var r,n,a=[],o=!1;return function(){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return o&&r===this&&t(s,a)||(n=e.apply(this,s),o=!0,r=this,a=s),n}}(We,dt)),function(e,t,r){void 0===r&&(r={});var n=function(e){var t=new Set;return e.drag&&t.add(Ye.get("drag")),e.wheel&&t.add(Ye.get("wheel")),e.scroll&&t.add(Ye.get("scroll")),e.move&&t.add(Ye.get("move")),e.pinch&&t.add(Ye.get("pinch")),e.hover&&t.add(Ye.get("hover")),t}(e),a=o().useMemo((function(){return new rt(n)}),[]);return a.config=t,a.handlers=e,a.nativeRefs=r,o().useEffect(a.effect,[]),a.config.domTarget?lt:a.bind}({drag:({delta:e,dragging:t})=>{const a="left"===i?-2:2;t?r(e[0]*a):n()}},s.current(t))}();return(0,a.createElement)("div",{className:`pattern-preview__drag-handle ${t}`},(0,a.createElement)("button",{className:"pattern-preview__drag-handle-button","aria-label":e,...s,onKeyDown:e=>{const{keyCode:t}=e;"left"===i&&t===gt.LEFT||"right"===i&&t===gt.RIGHT?r(20):("left"===i&&t===gt.RIGHT||"right"===i&&t===gt.LEFT)&&r(-20)},onKeyUp:n,...l()}))},ft=function e({pattern:t}){const r=(0,ve.useViewportMatch)("mobile",">="),n=(0,ve.useViewportMatch)("large",">="),o=(0,ve.useViewportMatch)("wide",">="),l=(0,ve.useInstanceId)(e),[c,u]=(0,i.useState)(window.innerWidth<960?window.innerWidth:960),p=(0,i.useCallback)((e=>u((t=>t+e))),[u]),d=()=>{c<280&&u(280)},g=(0,i.useMemo)((()=>r?o?[{label:(0,s.__)("Full (1200px)","wporg-patterns"),value:1200},{label:(0,s.__)("Default (960px)","wporg-patterns"),value:960},{label:(0,s.__)("Medium (480px)","wporg-patterns"),value:480},{label:(0,s.__)("Narrow (320px)","wporg-patterns"),value:320}]:n?[{label:(0,s.__)("Default (960px)","wporg-patterns"),value:960},{label:(0,s.__)("Medium (480px)","wporg-patterns"),value:480},{label:(0,s.__)("Narrow (320px)","wporg-patterns"),value:320}]:[{label:(0,s.__)("Medium (480px)","wporg-patterns"),value:480},{label:(0,s.__)("Narrow (320px)","wporg-patterns"),value:320}]:[]),[r,n,o]);let m=!1;if(!g.some((e=>e.value===c))){const e=Math.max(Math.floor(c),280);m={
/* translators: %s is the width in pixels, ex 600. */
label:(0,s.sprintf)((0,s.__)("Current (%spx)","wporg-patterns"),e),value:e}}return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"pattern-preview__size-control"},r&&(0,a.createElement)(_e.SelectControl,{hideLabelFromVision:!0,label:(0,s.__)("Preview Width","wporg-patterns"),value:c,options:m?[m,...g]:g,onChange:e=>u(Number(e))})),(0,a.createElement)("div",{className:"pattern-preview__viewport",style:{width:c+40}},(0,a.createElement)(mt,{label:(0,s.__)("Drag to resize","wporg-patterns"),className:"is-left",onDragChange:p,onDragEnd:d,direction:"left","aria-describedby":`pattern-preview__resize-help-${l}`}),(0,a.createElement)(ye,{url:(0,y.addQueryArgs)(t.link,{view:!0})}),(0,a.createElement)(mt,{label:(0,s.__)("Drag to resize","wporg-patterns"),className:"is-right",onDragChange:p,onDragEnd:d,direction:"right","aria-describedby":`pattern-preview__resize-help-${l}`}),(0,a.createElement)(_e.VisuallyHidden,{id:`pattern-preview__resize-help-${l}`,className:"pattern-preview__resize-help"},(0,s.__)("Use left and right arrow keys to resize the preview.","wporg-patterns"))))},ht=()=>(0,a.createElement)("div",{style:{height:"220px"}},(0,a.createElement)("img",{src:`${wporgPatternsUrl.assets}/images/copy-paste-demo.gif`,alt:(0,s.__)("GIF of copy and pasting.","wporg-patterns")})),vt=({onFinish:e})=>(0,a.createElement)(_e.Animate,{type:"appear",options:{origin:"bottom"}},(({className:t})=>(0,a.createElement)(_e.Guide,{className:`pattern-actions__guide ${t}`,onFinish:e,finishButtonText:(0,s.__)("Close","wporg-patterns"),pages:[{image:(0,a.createElement)(ht,null),content:(0,a.createElement)("div",{className:"pattern-actions__guide-content"},(0,a.createElement)("h3",{className:"pattern-actions__guide-title"},(0,s.__)("How to use patterns on your WordPress site.","wporg-patterns")),(0,a.createElement)("p",null,(0,s.__)("Patterns are really just text. And, just like you can copy and paste text, you can copy and paste patterns. It’s really easy!","wporg-patterns")),(0,a.createElement)("ol",null,(0,a.createElement)("li",null,(0,a.createElement)("p",null,(0,s.__)("Open any post or page in the WordPress block editor.","wporg-patterns"))),(0,a.createElement)("li",null,(0,a.createElement)("p",null,(0,s.__)("Place your cursor where you want to add the pattern.","wporg-patterns"))),(0,a.createElement)("li",null,(0,a.createElement)("p",null,(0,i.createInterpolateElement)((0,s.__)("Paste the contents of your clipboard by holding down <kbd>ctrl</kbd> control (Windows) or <kbd>⌘</kbd> command (Mac) and pressing the <kbd>v</kbd> key, or right-clicking and choose “Paste” from the menu.","wporg-patterns"),{kbd:(0,a.createElement)("kbd",{className:"pattern-actions__guide-shortcut"})})))))}]})));var _t=r(967),yt=r.n(_t);const wt=window.lodash,Et=window.wp.a11y,bt=({isSmall:e=!1,onSuccess:t=wt.noop,content:r})=>{const[n,o]=(0,i.useState)(!1);if(!r){const e=document.getElementById("block-data");r=JSON.parse(decodeURIComponent(e.value))}(0,i.useEffect)((()=>{if(!n)return;(0,Et.speak)((0,s.__)("Copied pattern to clipboard.","wporg-patterns"));const e=setTimeout((()=>o(!1)),2e4);return()=>{clearTimeout(e)}}),[n]);let l=(0,s.__)("Copy Pattern","wporg-patterns");e&&(l=n?(0,s.__)("Copied","wporg-patterns"):(0,s.__)("Copy","wporg-patterns"));const c=yt()({"pattern-copy-button":!0,"is-small-label":e});return(0,a.createElement)(_e.Button,{className:c,isPrimary:!0,onClick:({target:e})=>{const n=(e=>{const t=document.createElement("textarea");t.setAttribute("readonly",""),t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.left="-9999px",t.value=e,document.body.appendChild(t),t.select();const r=document.execCommand("copy");return document.body.removeChild(t),r})(r);o(n),e.focus(),n&&t()}},l)},St=({onClick:e})=>(0,a.createElement)(_e.Notice,{className:"pattern-actions__notice",status:"success",isDismissible:!1,actions:[{label:(0,s.__)("Learn More","wporg-patterns"),onClick:e,variant:"secondary"}]},(0,a.createElement)("div",null,(0,a.createElement)("strong",null,(0,s.__)("Pattern copied!","wporg-patterns")),(0,s.__)("Now you can paste it into any WordPress post or page.","wporg-patterns"))),Pt=window.wp.coreData;function Nt(e){return(0,a.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",...e},(0,a.createElement)(g.Path,{d:"M12 4.915c1.09-1.28 2.76-2.09 4.5-2.09 3.08 0 5.5 2.42 5.5 5.5 0 3.777-3.394 6.855-8.537 11.518l-.013.012-1.45 1.32-1.45-1.31-.04-.036C5.384 15.17 2 12.095 2 8.325c0-3.08 2.42-5.5 5.5-5.5 1.74 0 3.41.81 4.5 2.09zm0 13.56l.1-.1c4.76-4.31 7.9-7.16 7.9-10.05 0-2-1.5-3.5-3.5-3.5-1.54 0-3.04.99-3.56 2.36h-1.87c-.53-1.37-2.03-2.36-3.57-2.36-2 0-3.5 1.5-3.5 3.5 0 2.89 3.14 5.74 7.9 10.05l.1.1z"}))}const kt=({showLabel:e=!0,patternId:t})=>{const{hasPermission:r,isFavorite:n}=(0,c.useSelect)((e=>(e(fe).getFavorites(),{hasPermission:!!e(Pt.store).canUser("create","../../wporg/v1/pattern-favorites"),isFavorite:e(fe).isFavorite(t)}))),{addFavorite:o,removeFavorite:l}=(0,c.useDispatch)(fe),u=(0,i.useCallback)((()=>{n?l(t):o(t)}),[n]);if(!r)return null;const p=yt()("button button-link pattern-favorite-button",{"is-favorited":n,"has-label":e}),d=yt()({"screen-reader-text":!e});return(0,a.createElement)("button",{className:p,onClick:u},(0,a.createElement)(m,{className:"pattern-favorite-button__filled"}),(0,a.createElement)(Nt,{className:"pattern-favorite-button__outline"}),(0,a.createElement)("span",{className:d},n?(0,s.__)("Remove from favorites","wporg-patterns"):(0,s.__)("Add to favorites","wporg-patterns")))},Ct=window.wp.apiFetch;var Tt=r.n(Ct);const xt=(0,a.createElement)(g.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(g.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})),At=({patternId:e,isSmall:t})=>{const{isDraft:r,parent:n}=(0,c.useSelect)((t=>{const r=t(fe).getPattern(e);return{isDraft:"draft"===r?.status,parent:r?.parent||0}}),[e]),{loadPattern:o}=(0,c.useDispatch)(fe),i=()=>{Tt()({path:`/wp/v2/wporg-pattern/${e}/`,method:"PUT",data:{status:"draft"}}).then((t=>{o(e,t)}))},l=()=>{window.confirm((0,s.__)("Are you sure you want to delete this pattern?","wporg-patterns"))&&Tt()({path:`/wp/v2/wporg-pattern/${e}/`,method:"DELETE"}).then((()=>{window.location=`${wporgPatternsUrl.site}/my-patterns/`}))},u=`${wporgPatternsUrl.site}/pattern/${n||e}/edit/`,p=t?(0,a.createElement)(_e.Icon,{icon:xt}):(0,a.createElement)(a.Fragment,null,(0,s.__)("Options","wporg-patterns"),(0,a.createElement)(_e.Icon,{icon:xt})),d=t?"pattern-manage-options__button is-small":"pattern-manage-options__button";return(0,a.createElement)(_e.DropdownMenu,{className:"pattern-manage-options",icon:null,toggleProps:{className:d,children:p,variant:"secondary"},popoverProps:{position:"bottom center",className:"pattern-manage-options__popover"}},(()=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_e.MenuItem,{href:u},n?(0,s.__)("Open original in editor","wporg-patterns"):(0,s.__)("Open in editor","wporg-patterns")),!r&&(0,a.createElement)(_e.MenuItem,{onClick:i},(0,s.__)("Revert to draft","wporg-patterns")),(0,a.createElement)(_e.MenuItem,{isDestructive:!0,variant:"link",onClick:l},(0,s.__)("Delete pattern","wporg-patterns")))))},It=({postId:e,showOptions:t})=>{const[r,n]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1);return(0,a.createElement)("div",{className:"pattern-actions"},(0,a.createElement)("div",{className:"pattern-actions__container"},(0,a.createElement)(bt,{onSuccess:()=>n(!0)}),(0,a.createElement)(kt,{patternId:e}),t&&(0,a.createElement)(At,{patternId:e}),r&&(0,a.createElement)(St,{onClick:()=>s(!0)}),o&&(0,a.createElement)(vt,{onFinish:()=>s(!1)})))},Ot=10,Rt=2e3,Lt=1200,Dt=600;function Ft({alt:e,className:t,isReady:r=!1,src:n,style:o}){const l=(0,y.addQueryArgs)(`https://s0.wp.com/mshots/v1/${encodeURIComponent(n)}`,{w:Dt,vpw:Lt,vph:h(Lt)}),[c,u]=(0,i.useState)(0),[p,d]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),[f,v]=(0,i.useState)(""),[_,w]=(0,i.useState)(!1),E=c>Ot,b=r&&!p&&!E&&!g,S=async()=>{try{const e=await fetch(l);e.redirected?w(!0):200!==e.status||e.redirected?u(c+1):(await(async e=>{const t=await e.blob(),r=new FileReader;r.onload=e=>{v(e.target.result)},r.readAsDataURL(t)})(e),d(!0),w(!1))}catch(e){m(!0),w(!1)}};return(0,i.useEffect)((()=>{(async()=>{await S()})()}),[]),function(e,t){const r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current=e}),[e]),(0,i.useEffect)((()=>{if(null!==t){const e=setInterval((function(){r.current()}),t);return()=>clearInterval(e)}}),[t])}((async()=>{await S()}),_?Rt:null),r?b?(0,a.createElement)("div",{className:`${t} is-loading`,style:o},(0,a.createElement)(_e.Spinner,{style:{width:"32px",height:"32px"}}),(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.__)("Loading","wporg-patterns"))):g||E?(0,a.createElement)("div",{className:`${t} has-error`,style:o},(0,s.__)("Error","wporg-patterns")):(0,a.createElement)("div",{className:t},(0,a.createElement)("img",{src:f,alt:e,style:{...o,verticalAlign:"middle"}})):null}function Mt({alt:e,url:t,useMShot:r=!0}){const n=(0,i.useRef)(),o=(({element:e})=>{const[t,r]=(0,i.useState)(null);(0,i.useEffect)((()=>{if(!e.current)return;const t=(0,wt.debounce)(n,200);return n(),window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}),[e]);const n=()=>{if(!e.current)return;const t=window.innerHeight,{top:n}=e.current.getBoundingClientRect();r(n>=0&&n<=t)};return t})({element:n}),[l,c]=(0,i.useState)(1),[u,p]=(0,i.useState)(1),[d,g]=(0,i.useState)(!1);(0,i.useEffect)((()=>{o&&g(!0)}),[o]),(0,i.useEffect)((()=>{const e=()=>{try{c(h(n.current.clientWidth)),p(n.current.clientWidth)}catch(e){}};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[o]);const m={border:"none",width:"100%",maxWidth:"none",height:`${l}px`,display:"flex",alignItems:"center",justifyContent:"center"};return(0,a.createElement)("div",{ref:n},r?(0,a.createElement)(Ft,{className:"pattern-grid__preview",alt:e||(0,s.__)("Pattern Preview","wporg-patterns"),style:m,isReady:d,src:"local"===wporgPatternsData.env?t.replace(wporgPatternsUrl.site,"https://wordpress.org/patterns"):t}):(0,a.createElement)("div",{style:{height:`${l}px`,overflow:"hidden"}},(0,a.createElement)("iframe",{className:"pattern-grid__preview",title:e||(0,s.__)("Pattern Preview","wporg-patterns"),tabIndex:"-1",style:{border:"none",width:4*u+"px",maxWidth:"none",height:4*l+"px",transform:"scale(0.25)",transformOrigin:(0,s.isRTL)()?"top right":"top left",pointerEvents:"none"},src:d?t:""})))}const $t=({className:e,label:t,patternId:r})=>{const{hasPermission:n,isFavorite:o}=(0,c.useSelect)((e=>(e(fe).getFavorites(),{hasPermission:!!e(Pt.store).canUser("create","../../wporg/v1/pattern-favorites"),isFavorite:e(fe).isFavorite(r)}))),{addFavorite:s,removeFavorite:l}=(0,c.useDispatch)(fe),u=(0,i.useCallback)((()=>{o?l(r):s(r)}),[o]),p=yt()(e,"pattern-favorite-button-small",{button:n,"button-link":n,"is-favorited":o});return n?(0,a.createElement)("button",{className:p,onClick:u},(0,a.createElement)(m,{className:"pattern-favorite-button__filled"}),(0,a.createElement)("span",null,t)):(0,a.createElement)("span",{className:p},(0,a.createElement)(m,{className:"pattern-favorite-button__filled"}),(0,a.createElement)("span",null,t))},Bt=function({pattern:e,showAvatar:t,showOptions:r}){const n=function(e){switch(e.status){case"pending-review":case"pending":return(0,s.__)("Pending","wporg-patterns");case"draft":return(0,s.__)("Draft","wporg-patterns");case"unlisted":return(0,s.__)("Declined","wporg-patterns")}return""}(e);return(0,a.createElement)("div",{className:"pattern-grid__pattern"},(0,a.createElement)("div",{className:"pattern-grid__pattern-frame"},(0,a.createElement)("a",{href:e.link,rel:"bookmark"},(0,a.createElement)("span",{className:"screen-reader-text"},(0,l.decodeEntities)(e.title.rendered)),(0,a.createElement)(Mt,{useMShot:"publish"===e.status,url:(0,y.addQueryArgs)(e.link,{view:!0,modified:e.modified_gmt,version:wporgPatternsData.thumbnailVersion})})),n?(0,a.createElement)("div",{className:`pattern-grid__status is-${e.status}`},(0,a.createElement)("span",null,n)):null,(0,a.createElement)("span",{className:"pattern-grid__actions"},(0,a.createElement)(kt,{showLabel:!1,patternId:e.id}),r&&(0,a.createElement)(At,{isSmall:!0,patternId:e.id}),(0,a.createElement)(bt,{isSmall:!0,content:e.pattern_content}))),(0,a.createElement)("h2",{className:"pattern-grid__title"},(0,a.createElement)("a",{href:e.link},(0,l.decodeEntities)(e.title.rendered))),(0,a.createElement)("p",{className:"pattern-grid__meta"},t&&e.author_meta?(0,a.createElement)("a",{href:e.author_meta.url,className:"pattern-grid__author-avatar"},(0,a.createElement)("img",{alt:"",src:e.author_meta.avatar}),e.author_meta.name):null,e.favorite_count>0?(0,a.createElement)($t,{className:"pattern-grid__favorite-count",patternId:e.id,label:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",{className:"screen-reader-text"},(0,s.sprintf)(/* translators: %s is the favorite count for a pattern. */ /* translators: %s is the favorite count for a pattern. */
(0,s._n)("Favorited %s times","Favorited %s times",e.favorite_count,"wporg-patterns"),e.favorite_count)),(0,a.createElement)("span",{"aria-hidden":!0},e.favorite_count))}):null))},Qt=(0,i.forwardRef)((function({icon:e,size:t=24,...r},n){return(0,i.cloneElement)(e,{width:t,height:t,...r,ref:n})})),jt=(0,a.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(g.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),qt=(e,t)=>{switch(t.status){case"submitting":return{isSubmitting:!0};case"submitted":return{isSubmitted:!0};case"error":return{hasError:!0,message:t.message};default:return{}}},Ut=({postId:e,onClose:t})=>{const[r,n]=(0,i.useReducer)(qt,{}),[o,l]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),d=(0,i.useRef)(),g=(0,s.__)("Your report has been submitted.","wporg-patterns"),{isLoading:m,mappedReasons:f}=(0,c.useSelect)((e=>{const{getPatternFlagReasons:t,isLoadingPatternFlagReasons:r}=e(fe),n=t()||[];return{isLoading:r(),mappedReasons:n.sort(((e,t)=>{switch(!0){case e.slug<t.slug:return-1;case e.slug>t.slug:return 1;default:return 0}})).map((e=>({label:e.name,value:e.id.toString()})))}})),h=()=>{t(r.isSubmitted)};return(0,a.createElement)(_e.Modal,{className:"pattern-report-modal "+(r.isSubmitted?"":"pattern-report-modal__has-fixed-height"),title:(0,s.__)("Report this pattern","wporg-patterns"),onRequestClose:h},(0,a.createElement)("div",{ref:d},m?(0,a.createElement)(_e.Spinner,null):r.isSubmitted?(0,a.createElement)("p",{className:"pattern-report-modal__copy"},g):(0,a.createElement)("form",{onSubmit:t=>{t.preventDefault(),o&&u.length&&!r.isSubmitted&&!r.isSubmitting&&(n({status:"submitting"}),Tt()({path:(0,y.addQueryArgs)("/wp/v2/wporg-pattern-flag"),method:"POST",data:{parent:e,"wporg-pattern-flag-reason":o,excerpt:u}}).then((()=>{n({status:"submitted"}),(0,Et.speak)(g),d.current.closest('[role="dialog"]').focus()})).catch((e=>{n({status:"error",message:e.message}),(0,Et.speak)((0,s.sprintf)(/* translators: %s: Error message. */ /* translators: %s: Error message. */
(0,s.__)("Error: %s","wporg-patterns"),e.message))})))}},(0,a.createElement)(_e.RadioControl,{className:"pattern-report-modal__radio",label:(0,s.__)("Please choose a reason:","wporg-patterns"),selected:o,options:f,onChange:l,required:!0}),(0,a.createElement)(_e.TextareaControl,{label:(0,s.__)("Please provide details (required)","wporg-patterns"),value:u,onChange:p,required:!0}),r.hasError&&(0,a.createElement)("div",{className:"notice notice-large notice-alt notice-error"},r.message),(0,a.createElement)("div",{className:"pattern-report-modal__actions"},(0,a.createElement)(_e.Button,{isSecondary:!0,onClick:h},(0,s.__)("Cancel","wporg-patterns")),(0,a.createElement)(_e.Button,{type:"submit",isBusy:r.isSubmitting,isPrimary:!0},r.isSubmitting?(0,s.__)("Submitting …","wporg-patterns"):(0,s.__)("Report","wporg-patterns"))))))},Vt=({postId:e,userHasReported:t})=>{const[r,n]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),c=t||o,u=!!wporgPatternsData.userId;return c?(0,a.createElement)("p",{className:"pattern-report-button__copy"},(0,a.createElement)(Qt,{icon:jt}),(0,s.__)("You've reported this pattern","wporg-patterns")):u?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_e.Button,{className:"pattern-report-button",isLink:!0,onClick:()=>n(!0)},(0,s.__)("Report this pattern","wporg-patterns")),r&&(0,a.createElement)(Ut,{postId:e,onClose:e=>{n(!1),l(e)}})):(0,a.createElement)("p",{className:"pattern-report-button__copy"},(0,a.createElement)("a",{href:(0,y.addQueryArgs)("/wp-login.php",{redirect_to:window.location.pathname})},(0,s.__)("Login to report this pattern","wporg-patterns")))};function Kt({pattern:e}){const[t,r]=(0,i.useState)(!1),n=()=>r(!0),o=()=>r(!1);switch(e.status){case"pending-review":case"pending":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_e.Notice,{className:"pattern__status-notice",status:"warning",isDismissible:!1,actions:[{label:(0,s.__)("Learn More","wporg-patterns"),onClick:n,variant:"secondary"}]},(0,a.createElement)("p",null,(0,a.createElement)("strong",null,(0,s.__)("Review pending.","wporg-patterns")),(0,s.__)("This pattern is only visible to you. Once approved it will be published to everyone.","wporg-patterns"))),t&&(0,a.createElement)(_e.Modal,{title:(0,s.__)("Review Pending","wporg-patterns"),onRequestClose:o,className:"pattern__status-notice-modal"},(0,a.createElement)("p",null,(0,s.__)("All patterns submitted to WordPress.org are subject to both automated and manual approval. It might take a few days for your pattern to be approved.","wporg-patterns")),(0,a.createElement)("p",null,(0,s.__)("Reviewers look for content that may be problematic (copyright or trademark issues) and whether your pattern works as intended.","wporg-patterns"))));case"draft":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_e.Notice,{className:"pattern__status-notice",status:"info",isDismissible:!1,actions:[{label:(0,s.__)("Learn More","wporg-patterns"),onClick:n,variant:"secondary"}]},(0,a.createElement)("p",null,(0,a.createElement)("strong",null,(0,s.__)("Saved as draft.","wporg-patterns")),(0,s.__)("This pattern is only visible to you. When you’re ready, submit it to be published to everyone.","wporg-patterns"))),t&&(0,a.createElement)(_e.Modal,{title:(0,s.__)("Drafts","wporg-patterns"),onRequestClose:o,className:"pattern__status-notice-modal"},(0,a.createElement)("p",null,(0,s.__)("Patterns can be saved as a draft which can be submitted for approval at any time. This allows you to save your design and come back to it later to submit.","wporg-patterns"))));case"unlisted":return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(_e.Notice,{className:"pattern__status-notice",status:"error",isDismissible:!1,actions:[{label:(0,s.__)("Learn More","wporg-patterns"),onClick:n,variant:"secondary"}]},(0,a.createElement)("p",null,(0,a.createElement)("strong",null,(0,s.__)("Pattern declined.","wporg-patterns")),(0,s.__)("WordPress.org has chosen not to include this pattern in the directory.","wporg-patterns"))),t&&(0,a.createElement)(_e.Modal,{title:(0,s.__)("Declined","wporg-patterns"),onRequestClose:o,className:"pattern__status-notice-modal"},(0,a.createElement)("p",null,(0,s.__)("WordPress.org has removed your pattern from the directory for the following reason:","wporg-patterns")),(0,a.createElement)("p",null,(0,a.createElement)("em",{dangerouslySetInnerHTML:{__html:e.unlisted_reason?.description||(0,s.__)("This pattern doesn't meet the guidelines for the pattern directory.","wporg-patterns")}})),(0,a.createElement)("p",null,(0,s.__)("You can update your pattern to resubmit it for approval at any time.","wporg-patterns"))));case"publish":return(0,a.createElement)(_e.Notice,{className:"pattern__status-notice",status:"success",isDismissible:!1},(0,a.createElement)("p",null,(0,a.createElement)("strong",null,(0,s.__)("Pattern published!","wporg-patterns")),(0,s.__)("Your new design is now available to everyone.","wporg-patterns")))}return null}const Gt=({postId:e,userHasReported:t})=>{e=Number(e)||0;const{pattern:r,categories:n}=(0,c.useSelect)((t=>{const r=t(fe).getPattern(e),n=t(fe).getCategories()||[],a=r?.["pattern-categories"].map((e=>n.find((({id:t})=>t===e)))).filter(Boolean);return{pattern:r,categories:a||[]}}),[e]);if(!r)return null;const o=window.wporgPatternsData.userId===r.author;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("header",{className:"entry-header"},o&&(0,a.createElement)(Kt,{pattern:r}),(0,a.createElement)("h1",{className:"entry-title"},(0,l.decodeEntities)(r.title.rendered)),(0,a.createElement)("div",{className:"pattern__categories"},n.map((({id:e,name:t,link:r})=>(0,a.createElement)("a",{href:r,key:e},(0,l.decodeEntities)(t)))))),(0,a.createElement)(It,{postId:e,showOptions:o}),(0,a.createElement)("div",{className:"pattern-preview__container"},(0,a.createElement)(ft,{pattern:r}),(0,a.createElement)("div",{className:"pattern__meta"},(0,a.createElement)(Vt,{userHasReported:"true"===t,postId:e}))),(0,a.createElement)("div",{className:"pattern__related-patterns"},(0,a.createElement)(he,{query:{author:r.author,per_page:3,exclude:e},showPagination:!1,header:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("h2",null,(0,s.__)("More from this designer","wporg-patterns")),(0,a.createElement)(u,{...r.author_meta}))},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e})))))},Wt=e=>{const t=document.getElementById("breadcrumb-part");t&&(t.innerText=e)},zt=()=>{const{path:e}=C(),{authorName:t,categoryName:r}=(0,c.useSelect)((t=>{const r=t(fe).getQueryFromUrl(e),n=t(fe).getCategoryById(r["pattern-categories"]);return{authorName:wporgPatternsData.currentAuthorName||r?.author_name,categoryName:n?.name}}),[]);return(0,i.useEffect)((()=>{t?
// translators: %s is the author name.
Wt((0,s.sprintf)((0,s.__)("Author: %s","wporg-patterns"),t)):r&&
// translators: %s is the category name.
Wt((0,s.sprintf)((0,s.__)("Category: %s","wporg-patterns"),r))}),[e,t,r]),null};var Ht=Object.prototype.hasOwnProperty;function Yt(e,t,r){for(r of e.keys())if(Xt(r,t))return r}function Xt(e,t){var r,n,a;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Xt(e[n],t[n]););return-1===n}if(r===Set){if(e.size!==t.size)return!1;for(n of e){if((a=n)&&"object"==typeof a&&!(a=Yt(t,a)))return!1;if(!t.has(a))return!1}return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e){if((a=n[0])&&"object"==typeof a&&!(a=Yt(t,a)))return!1;if(!Xt(n[1],t.get(a)))return!1}return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return-1===n}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return-1===n}if(!r||"object"==typeof e){for(r in n=0,e){if(Ht.call(e,r)&&++n&&!Ht.call(t,r))return!1;if(!(r in t)||!Xt(e[r],t[r]))return!1}return Object.keys(t).length===n}}return e!=e&&t!=t}function Jt(e,t){return a.useEffect(e,(r=t,n=a.useRef(r),o=a.useRef(0),Xt(r,n.current)||(n.current=r,o.current+=1),a.useMemo((function(){return n.current}),[o.current])));var r,n,o}const Zt=(e=1,t=1)=>1===t?"":(0,s.sprintf)((0,s.__)("Page %1$d of %2$d.","wporg-patterns"),e,t)
/* translators: %1$d: current page. %2$d: total number of pages.  */,er=function(e){const{path:t}=C(),[r,n]=(0,i.useState)(),[o]=(0,i.useState)({title:"",links:[]}),{author:l,category:u,count:p,isLoadingPatterns:d,pageLabel:g,query:m}=(0,c.useSelect)((r=>{const{getCategoryById:n,getPatternTotalsByQuery:a,getPatternTotalPagesByQuery:o,getQueryFromUrl:i,isLoadingPatternsByQuery:s}=r(fe),l={...i(t),...e.query},c=s(l);return{author:wporgPatternsData.currentAuthorName||l?.author_name,category:n(l["pattern-categories"]),count:a(l),isLoadingPatterns:c,pageLabel:l&&!c?Zt(l.page,o(l)):"",query:l}}),[t,e.query]);Jt((()=>{if(((e={})=>!e.hasOwnProperty("include")||e.include.length>0)(m)&&d)return void n((({category:e,author:t})=>e&&t?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %1$s category name, %2$s author name. */ /* translators: %1$s category name, %2$s author name. */
(0,s.__)("Loading <b>%1$s</b> patterns by %2$s.","wporg-patterns"),e,t),{b:(0,a.createElement)("b",null)}):e?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %s category name. */ /* translators: %s category name. */
(0,s.__)("Loading <b>%s</b> patterns.","wporg-patterns"),e),{b:(0,a.createElement)("b",null)}):t?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %s author name. */ /* translators: %s author name. */
(0,s.__)("Loading patterns by <b>%s</b>.","wporg-patterns"),t),{b:(0,a.createElement)("b",null)}):(0,s.__)("Loading patterns","wporg-patterns"))({category:u?.name,author:l}));if((e=>!Object.keys(e||{}).filter((e=>!["orderby","page","curation"].includes(e))).length)(m))return void n("");const e=m?.search||"";e.length>0?n(((e,t)=>(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %1$d: number of patterns. %2$s search term.  */ /* translators: %1$d: number of patterns. %2$s search term.  */
(0,s._n)("%1$d pattern found for <b>%2$s</b>","%1$d patterns found for <b>%2$s</b>",e,"wporg-patterns"),e,t.replace(/\+/g," "),"wporg-patterns"),{b:(0,a.createElement)("b",null)}))(p,e)):(n((({category:e,author:t},r)=>e&&t?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %1$d: number of patterns, %2$s category name, %3$s author name. */ /* translators: %1$d: number of patterns, %2$s category name, %3$s author name. */
(0,s._n)("%1$d <b>%2$s</b> pattern by %3$s.","%1$d <b>%2$s</b> patterns by %3$s.",r,"wporg-patterns"),r,e,t),{b:(0,a.createElement)("b",null)}):e?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %1$d: number of patterns, %2$s category name. */ /* translators: %1$d: number of patterns, %2$s category name. */
(0,s._n)("%1$d <b>%2$s</b> pattern.","%1$d <b>%2$s</b> patterns.",r,"wporg-patterns"),r,e,"wporg-patterns"),{b:(0,a.createElement)("b",null)}):t?(0,i.createInterpolateElement)((0,s.sprintf)(/* translators: %1$d: number of patterns, %2$s author name. */ /* translators: %1$d: number of patterns, %2$s author name. */
(0,s._n)("%1$d pattern by <b>%2$s</b>.","%1$d patterns by <b>%2$s</b>.",r,"wporg-patterns"),r,t),{b:(0,a.createElement)("b",null)}):(0,s.__)("Loading patterns","wporg-patterns"))({category:u?.name,author:l},p)),m?.include&&!u&&n(""))}),[m,d]);const f=yt()({"context-bar__spinner":!0,"context-bar__spinner--is-hidden":!d||e.isEmpty});return(0,a.createElement)("div",{className:r?null:"screen-reader-text"},(0,a.createElement)("header",{className:"context-bar","aria-live":"polite","aria-atomic":"true",tabIndex:"0"},(0,a.createElement)("h2",{className:"context-bar__copy"},(0,a.createElement)("span",{className:f},(0,a.createElement)(_e.Spinner,null)),(0,a.createElement)("span",null,r||(0,s.__)("All patterns.","wporg-patterns")),g&&(0,a.createElement)("span",{className:"screen-reader-text"},g)),o.links&&o.links.length>0&&(0,a.createElement)("div",{className:"context-bar__links"},(0,a.createElement)("h3",{className:"context-bar__title"},o.title),(0,a.createElement)("ul",null,o.links.map((e=>(0,a.createElement)("li",{key:e.href},(0,a.createElement)("a",{href:e.href},e.label))))))))},tr=()=>{const{path:e}=C(),t=(0,c.useSelect)((t=>{const r=t(fe).getQueryFromUrl(e),n=t(fe).getCategoryById(r["pattern-categories"])?.name,a=wporgPatternsData.currentAuthorName||r?.author_name,o=S(e),i=w(e).replace(/^\/patterns/,"").split("/")[1]||"",l=[];return"categories"===i&&n?l.push(/* translators: Taxonomy term name */ /* translators: Taxonomy term name */
(0,s.sprintf)((0,s.__)("Block Patterns: %s","wporg-patterns"),n)):"author"===i&&a?l.push(/* translators: Author name */ /* translators: Author name */
(0,s.sprintf)((0,s.__)("Block Patterns by %s","wporg-patterns"),a)):l.push((0,s.__)("Block Pattern Directory","wporg-patterns")),o>1&&l.push(/* translators: Page number */ /* translators: Page number */
(0,s.sprintf)((0,s.__)("Page %d","wporg-patterns"),o)),l.push((0,s.__)("WordPress.org","wporg-patterns")+` ${wporgLocale.displayName}`),l.join(" | ")}));return(0,i.useEffect)((()=>{t&&(document.title=t)}),[t]),null},rr=function(){return(0,a.createElement)("div",{className:"pattern-grid__empty-header"},(0,a.createElement)("h2",null,(0,s.__)("No results found","wporg-patterns")),(0,a.createElement)("p",null,(0,i.createInterpolateElement)((0,s.__)("View <a>all block patterns</a> or browse some of our recent patterns.","wporg-patterns"),{a:(0,a.createElement)("a",{href:wporgPatternsUrl.site})})))},nr=({defaultValue:e,label:t,param:r,options:n})=>{const{path:o,replace:i}=C(),s=(0,ve.useViewportMatch)("medium",">=");if(!n)return null;const l=(0,y.getQueryArg)(window.location.href,r)||e;return(0,a.createElement)("div",{className:"pattern-select-control"},(0,a.createElement)(_e.SelectControl,{label:t,labelPosition:"side",hideLabelFromVision:s,value:l,options:n,onChange:e=>{i((0,y.addQueryArgs)(o,{[r]:e}).replace(/\/page\/[\d]+/,""))}}))},ar=()=>(0,a.createElement)(p,{className:"pattern-menu",style:{flexDirection:"row"}},Array(7).fill().map(((e,t)=>(0,a.createElement)(d,{key:t,height:"1.25rem",width:"5rem",marginRight:"1rem"})))),or=({current:e,isLoading:t,label:r=(0,s.__)("Main Menu","wporg-patterns"),onClick:n,options:o})=>t?(0,a.createElement)(ar,null):o.length?(0,a.createElement)("nav",null,(0,a.createElement)("h2",{className:"screen-reader-text"},r),(0,a.createElement)("ul",{className:"pattern-menu"},o.map((t=>(0,a.createElement)("li",{key:t.value},(0,a.createElement)("a",{className:yt()({"pattern-menu__item":!0,"is-active":e===t.slug}),href:t.value,onClick:n,"aria-current":e===t.slug?"page":void 0},t.label)))))):null,ir=({onClick:e,options:t,label:r=(0,s.__)("Browse categories","wporg-patterns")})=>{const[n,o]=(0,i.useState)(!1);return(0,a.createElement)(_e.PanelBody,{className:"pattern-menu is-mobile",title:r,initialOpen:n,opened:n,onToggle:()=>o(!n)},(0,a.createElement)("ul",null,t.map((t=>(0,a.createElement)("li",{key:t.value},(0,a.createElement)("a",{href:t.value,onClick:t=>{o(!1),e(t)}},t.label))))))},sr=e=>(0,ve.useViewportMatch)("medium","<")?(0,a.createElement)(ir,{...e}):(0,a.createElement)(or,{...e}),lr=({primary:e,secondary:t})=>(0,a.createElement)("div",{className:"pattern-navigation-layout"},e&&(0,a.createElement)("div",{className:"pattern-navigation-layout__primary"},e),t&&(0,a.createElement)("div",{className:"pattern-navigation-layout__secondary"},t)),cr=["","featured","query","text","gallery","call-to-action","banner","header","footer","wireframe"],ur=({basePath:e="",onNavigation:t,hideCuration:r=!1,...n})=>{const{path:o,update:i}=C(),{categorySlug:l,isLoading:u,options:p}=(0,c.useSelect)((t=>{const{getCategoryById:r,getCategories:n,getQueryFromUrl:a,getUrlFromQuery:i,isLoadingCategories:s}=t(fe),l=a(o);delete l.page;const c=n()||[],u=cr.map((t=>{const r=c.find((e=>e.slug===t));return!!r&&{value:i({...l,"pattern-categories":r.id},wporgPatternsUrl.site+e),slug:r.slug,label:r.name}})).filter(Boolean);return{categorySlug:r(l["pattern-categories"])?.slug||"",isLoading:s(),options:u}}));return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(lr,{primary:(0,a.createElement)(sr,{current:l,options:p||[],onClick:e=>{e.preventDefault(),i(e.target.pathname),"function"==typeof t&&t()},isLoading:u}),secondary:(0,a.createElement)(a.Fragment,null,r?null:(0,a.createElement)(nr,{label:(0,s.__)("Filter by","wporg-patterns"),param:"curation",defaultValue:"core",options:[{label:(0,s.__)("Curated","wporg-patterns"),value:"core"},{label:(0,s.__)("Community","wporg-patterns"),value:"community"}]}),(0,a.createElement)(nr,{label:(0,s.__)("Order by","wporg-patterns"),param:"orderby",defaultValue:"date",options:[{label:(0,s.__)("Newest","wporg-patterns"),value:"date"},{label:(0,s.__)("Popular","wporg-patterns"),value:"favorite_count"}]}))}),(0,a.createElement)(er,{...n}))},pr=()=>{const{setCurrentQuery:e}=(0,c.useDispatch)(fe),{path:t}=C(),r=(0,c.useSelect)((e=>e(fe).getQueryFromUrl(t)),[t]);return Jt((()=>{e(r)}),[r]),null},dr=window.wp.dom;function gr(){const e=(0,i.useRef)(),t=(0,i.useCallback)((()=>{if(!e?.current)return;const t=dr.focus.tabbable.find(e.current),r=t[t.length-1]||!1;r&&r.focus(),r.focus()}),[]);return[e,t]}const mr=function({isLoggedIn:e}){const t=(0,y.addQueryArgs)(wporgPatternsUrl.login,{redirect_to:window.location}),r=(0,y.addQueryArgs)(wporgPatternsUrl.register,{redirect_to:window.location});return e?(0,a.createElement)("div",{className:"pattern-grid__empty-header pattern-favorites__empty-header"},(0,a.createElement)("h2",null,(0,s.__)("Collect and view your favorite patterns.","wporg-patterns")),(0,a.createElement)("p",null,(0,s.__)("Tap the heart on any pattern to mark it as a favorite. All your favorite patterns will appear here.","wporg-patterns"))):(0,a.createElement)("div",{className:"pattern-grid__empty-header pattern-favorites__empty-header"},(0,a.createElement)("h2",null,(0,s.__)("Collect and view your favorite patterns.","wporg-patterns")),(0,a.createElement)("p",null,(0,s.__)("Log in to your WordPress.org account and you’ll be able to see all your favorite patterns in one place.","wporg-patterns")),(0,a.createElement)("p",null,(0,a.createElement)("a",{className:"button button-primary button-large",href:t},(0,s.__)("Log in","wporg-patterns"))),(0,a.createElement)("p",null,(0,a.createElement)("a",{className:"button-link link-create-account",href:r},(0,s.__)("Create an account","wporg-patterns"))))};function fr(){const{path:e,update:t}=C();let r=E(e,"my-patterns");"page"===r&&(r="all");const n=[{value:`${wporgPatternsUrl.site}/my-patterns/`,slug:"all",label:(0,s.__)("All","wporg-patterns")},{value:`${wporgPatternsUrl.site}/my-patterns/draft/`,slug:"draft",label:(0,s.__)("Drafts","wporg-patterns")},{value:`${wporgPatternsUrl.site}/my-patterns/pending/`,slug:"pending",label:(0,s.__)("Pending Review","wporg-patterns")}];return(0,a.createElement)(sr,{label:(0,s.__)("Menu","wporg-patterns"),current:r||"all",options:n,onClick:e=>{e.preventDefault(),t(e.target.pathname)},isLoading:!1})}const hr=document.getElementById("patterns__container");hr&&(0,i.render)((0,a.createElement)((()=>{const{isAuthor:e,isEmpty:t,isSearch:r,query:n}=(0,c.useSelect)((e=>{const{getCurrentQuery:t,getPatternsByQuery:r,isLoadingPatternsByQuery:n}=e(fe),a=t()||{},o=!!a.search,i=!!a.author_name,s={...a};o||i||s.curation||(s.curation="core");const l=n(s),c=s?r(s):[];return{isAuthor:i,isEmpty:!l&&!c.length,isSearch:o,query:s}})),[o,i]=gr();return(0,a.createElement)(k,null,(0,a.createElement)(tr,null),(0,a.createElement)(pr,null),(0,a.createElement)(zt,null),(0,a.createElement)("div",{ref:o},r?(0,a.createElement)(er,{query:n}):(0,a.createElement)(ur,{onNavigation:i,query:n,hideCuration:e})),t?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(rr,null),(0,a.createElement)(he,{query:{per_page:6,curation:"core"},showPagination:!1},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e,showAvatar:!0})))):(0,a.createElement)(he,{query:n,onNavigation:i},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e,showAvatar:!0}))))}),null),hr);const vr=document.getElementById("my-patterns__container");vr&&(0,i.render)((0,a.createElement)((()=>{const e=wporgPatternsData.userId,{isEmpty:t,query:r}=(0,c.useSelect)((t=>{const{getCurrentQuery:r,getPatternsByQuery:n,isLoadingPatternsByQuery:a}=t(fe),o={status:"any",...r()||{},author:e};"pending"===o.status&&(o.status="pending,pending-review");const i=e&&a(o),s=e?n(o):[];return{isEmpty:!i&&!s.length,query:o}}));if(!e){const e=(0,y.addQueryArgs)(wporgPatternsUrl.login,{redirect_to:window.location});return(0,a.createElement)("div",{className:"entry-content"},(0,a.createElement)("div",{className:"alignwide",style:{marginLeft:"auto",marginRight:"auto",maxWidth:960}},(0,a.createElement)("p",null,(0,s.__)("Please log in to view your patterns.","wporg-patterns")),(0,a.createElement)("p",null,(0,a.createElement)("a",{className:"button button-primary button-large",href:e},(0,s.__)("Log in","wporg-patterns"))),(0,a.createElement)("div",{style:{height:100},"aria-hidden":"true",className:"wp-block-spacer"})))}return(0,a.createElement)(k,null,(0,a.createElement)(pr,null),(0,a.createElement)(lr,{primary:(0,a.createElement)(fr,null),secondary:(0,a.createElement)(nr,{label:(0,s.__)("Order by","wporg-patterns"),param:"orderby",defaultValue:"date",options:[{label:(0,s.__)("Newest","wporg-patterns"),value:"date"},{label:(0,s.__)("Popular","wporg-patterns"),value:"favorite_count"}]})}),t?(0,a.createElement)("div",{className:"pattern-grid__empty-header"},(0,a.createElement)("h2",null,(0,s.__)("Create and share patterns for every WordPress site.","wporg-patterns")),(0,a.createElement)("p",null,(0,s.__)("Anyone can create and share patterns using the familiar block editor. Design helpful starting points for yourself and any WordPress site.","wporg-patterns")),(0,a.createElement)(_e.Button,{variant:"primary",href:`${wporgPatternsUrl.site}/new-pattern/`},(0,s.__)("Create your first pattern","wporg-patterns"))):(0,a.createElement)(he,{query:r},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e,showOptions:!0}))))}),null),vr);const _r=document.getElementById("pattern-favorites__container");_r&&(0,i.render)((0,a.createElement)((()=>{const{isEmpty:e,query:t}=(0,c.useSelect)((e=>{const{getCurrentQuery:t,getFavorites:r,getPatternsByQuery:n,isLoadingPatternsByQuery:a}=e(fe),o=t()||{},i=r();if(null===i)return{query:!1,isEmpty:!1};const s={...o,include:i},l=!!i.length&&a(s),c=i.length?n(s):[];return{query:s,isEmpty:!l&&!c.length}})),[r,n]=gr(),o={orderby:"favorite_count",per_page:6,curation:"core"};t["pattern-categories"]&&(o["pattern-categories"]=t["pattern-categories"]);const i=!!wporgPatternsData.userId;return(0,a.createElement)(k,null,(0,a.createElement)(pr,null),(0,a.createElement)("div",{ref:r},i&&(0,a.createElement)(ur,{basePath:"/favorites/",query:t,onNavigation:n,isEmpty:e,hideCuration:!0})),!i||e?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(mr,{isLoggedIn:i}),(0,a.createElement)(he,{header:(0,a.createElement)("h2",{className:"pattern-favorites__grid-title"},(0,s.__)("Here’s a few of our favorite patterns","wporg-patterns")),query:o,showPagination:!1},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e,showAvatar:!0})))):(0,a.createElement)(he,{query:t,onNavigation:n},(e=>(0,a.createElement)(Bt,{key:e.id,pattern:e,showAvatar:!0}))))}),null),_r);const yr=document.querySelectorAll(".pattern__container");for(let e=0;e<yr.length;e++){const t=yr[e],r=t.dataset;(0,i.render)((0,a.createElement)(Gt,{...r}),t,(()=>{t.hidden=!1,document.querySelectorAll(".hide-if-pattern-loaded").forEach((e=>e.hidden=!0))}))}})()})();